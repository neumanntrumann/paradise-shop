<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>PARADISE SHOP - Marketplace</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      padding: 20px;
      margin: 0;
      overflow-x: hidden;
      background: linear-gradient(to bottom, #f0f8ff, #e0f7fa);
      color: #333;
    }
    /* Hamburger menu styles */
    #menuToggle {
      position: fixed;
      top: 15px;
      left: 15px;
      width: 35px;
      height: 30px;
      cursor: pointer;
      z-index: 1100;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
    }
    #menuToggle span {
      display: block;
      height: 4px;
      background: #333;
      border-radius: 2px;
    }
    /* Sliding side menu */
    #sideMenu {
      position: fixed;
      top: 0;
      left: 0;
      width: 23vw;
      max-width: 300px;
      height: 100vh;
      background: #ffffff;
      box-shadow: 2px 0 10px rgba(0,0,0,0.2);
      transform: translateX(-100%);
      transition: transform 0.3s ease;
      z-index: 1050;
      padding-top: 60px;
      box-sizing: border-box;
    }
    #sideMenu.active {
      transform: translateX(0);
    }
    #sideMenu a {
      display: block;
      padding: 15px 25px;
      text-decoration: none;
      color: #333;
      font-weight: 600;
      border-bottom: 1px solid #eee;
    }
    #sideMenu a:hover,
    #sideMenu a:focus {
      background-color: #f0f0f0;
      outline: none;
    }
    /* Profile dropdown */
    #profileDropdownContainer {
      position: fixed;
      top: 15px;
      right: 15px;
      z-index: 1100;
    }
    #profileIcon {
      width: 40px;
      height: 40px;
      background-color: #333;
      color: white;
      border-radius: 50%;
      display: flex;
      justify-content: center;
      align-items: center;
      cursor: pointer;
      user-select: none;
      font-weight: bold;
      font-size: 20px;
    }
    #profileDropdown {
      display: none;
      position: absolute;
      top: 50px;
      right: 0;
      background: white;
      border: 1px solid #ccc;
      box-shadow: 0 2px 8px rgba(0,0,0,0.15);
      width: 220px;
      border-radius: 5px;
    }
    #profileDropdown.active {
      display: block;
    }
    #profileDropdown div#profileInfo {
      padding: 10px 15px;
      border-bottom: 1px solid #eee;
      font-size: 14px;
      line-height: 1.4;
      white-space: normal;
    }
    #profileDropdown a {
      display: block;
      padding: 8px 15px;
      text-decoration: none;
      color: #333;
      border-top: 1px solid #eee;
      font-weight: 600;
    }
    #profileDropdown a:hover,
    #profileDropdown a:focus {
      background-color: #f0f0f0;
      outline: none;
    }
    h1 {
      margin-top: 80px;
      text-align: center;
      font-size: 2.4em;
      color: #00796b;
    }
    .item {
      background: white;
      border-radius: 10px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
      padding: 20px;
      margin: 15px auto;
      max-width: 500px;
      transition: transform 0.2s ease;
    }
    .item:hover,
    .item:focus-within {
      transform: scale(1.01);
    }
    button {
      padding: 8px 16px;
      background-color: #00796b;
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 600;
      transition: background-color 0.2s ease;
      margin-right: 10px;
      margin-top: 5px;
    }
    button:hover,
    button:focus {
      background-color: #004d40;
      outline: none;
    }
    a {
      color: #00796b;
      font-weight: bold;
    }
    a:focus {
      outline: 2px solid #00796b;
      outline-offset: 2px;
    }
    .description {
      display: none;
      max-height: 150px;
      overflow-y: auto;
      margin-top: 10px;
      white-space: pre-wrap;
      border: 1px solid #ccc;
      padding: 10px;
      border-radius: 6px;
      background: #f9f9f9;
    }
  </style>
</head>
<body>

  <!-- Hamburger menu -->
  <div id="menuToggle" aria-label="Toggle navigation menu" role="button" tabindex="0" aria-pressed="false">
    <span></span>
    <span></span>
    <span></span>
  </div>

  <!-- Sliding side menu -->
  <nav id="sideMenu" aria-label="Main navigation menu" hidden>
    <a href="home.html">Home</a>
    <a href="balance.html">Balance</a>
    <a href="marketplace.html">Market</a>
    <a href="cart.html">Cart</a>
    <a href="orders.html">Orders</a>
    <a href="more.html">More</a>
    <a href="logout.html">Logout</a>
  </nav>

  <!-- Profile Dropdown -->
  <div id="profileDropdownContainer">
    <div id="profileIcon" tabindex="0" role="button" aria-label="User profile menu" aria-expanded="false" title="Profile">üë§</div>
    <div id="profileDropdown" role="menu" aria-label="User profile menu" hidden>
      <div id="profileInfo">Loading...</div>
      <a href="balance.html">Load Funds</a>
      <a href="home.html">Shop</a>
      <a href="cart.html">Cart</a>
      <a href="orders.html">Orders</a>
      <a href="logout.html">Logout</a>
    </div>
  </div>

  <h1>Marketplace</h1>

  <!-- Product 1 -->
  <div class="item" tabindex="0">
    <p><strong>üå¥ Spammed CC ‚Äì $15</strong></p>
    <button type="button" onclick="toggleDetails(this)">Details</button>
    <button type="button" onclick="addToCart('Spammed CC', 15)">Add to Cart</button>
    <div class="description" aria-hidden="true">
      90% Validity ‚Äî Restocked fresh every day
    </div>
  </div>

  <!-- Product 2 -->
  <div class="item" tabindex="0">
    <p><strong>üèùÔ∏è X2 EMV Software ‚Äì Full Breakdown</strong></p>
    <button type="button" onclick="toggleDetails(this)">Details</button>
    <button type="button" onclick="addToCart('X2 EMV Software', 400)">Add to Cart</button>
    <div class="description" aria-hidden="true">
      Everything you need to know about EMV software:

      What type of card can I read/write with this EMV software?
      SDA and DDA (Static/Dynamic) ‚Äî includes Visa, Visa Electron, MasterCard, Maestro, Amex, UnionPay, Diners, Discover, JCB.

      Will this EMV software work in any country?
      Yes ‚Äî it works anywhere EMV technology is used.

      What data is needed to make an ATM transaction?
      You‚Äôll need to write the Track 2 data.

      Can I use any PIN at an ATM?
      No ‚Äî you‚Äôll need the original PIN code.

      Can I use any PIN at POS?
      Yes ‚Äî any PIN can be used at most point-of-sale terminals.

      Can I check balance and withdraw money from ATM?
      Yes ‚Äî if you have a valid Track 2 and the correct PIN, you can perform all standard card functions.

      Where can I find smart cards?
      Message: @paradisestoreowner

      Where can I get the hardware?
      Search for Omnikey 3121 or check our website.

      What if I lose my PC with the EMV software?
      There are no replacements or re-sends. You lose it, it‚Äôs gone.

      What is the price for the EMV software?
      $400 USD ‚Äî Bitcoin only.

      What will I receive?
      You‚Äôll receive the full version of X2 software, a license key, and a user manual.

      Does the EMV software expire?
      No ‚Äî once purchased, it‚Äôs yours permanently.

      Will there be future updates?
      Yes ‚Äî NFC reader/writer support is coming.
    </div>
  </div>

  <!-- Product 3 -->
  <div class="item" tabindex="0">
    <p><strong>üå∫ Spamming Bundle ‚Äì What‚Äôs Included</strong></p>
    <button type="button" onclick="toggleDetails(this)">Details</button>
    <button type="button" onclick="addToCart('Spamming Bundle', 150)">Add to Cart</button>
    <div class="description" aria-hidden="true">
      1. Email Spammer Tool
      Mass email sender

      SMTP support or fake mail server

      Phishing email templates

      Email spoofing (fake ‚ÄúFrom‚Äù fields)

      Proxy integration

      2. Phishing Templates
      Fake login pages (Google, Microsoft, banking)

      Prize or reward scams

      Malicious files or links

      3. SMS Spammer
      Auto-senders for WhatsApp, Telegram, SMS

      Phone number databases

      Shortened malicious URLs

      4. Spoofing Tools
      Fake headers, spoofed IPs, and domain masking

      5. Scripts / Bots
      Python or PowerShell automation

      Captcha bypass bots

      Malicious Office document macros

      6. Bypass Tools
      Anti-spam evasion methods

      Email warming tools

      IP rotation / VPN tools

      7. Instructions & Tutorials
      PDF or video guide

      Full setup walkthrough

      Tips on staying undetected
    </div>
  </div>

  <!-- Product 4 -->
  <div class="item" tabindex="0">
    <p><strong>üí≥ D+P: $150</strong></p>
    <button type="button" onclick="toggleDetails(this)">Details</button>
    <button type="button" onclick="addToCart('D+P', 150)">Add to Cart</button>
    <div class="description" aria-hidden="true">
      Real, fresh, and verified dump + pin sets
      ‚úÖ 100% valid
      üë®‚Äçüíª Selling since 2020 ‚Äî check 5 years of vouches
      üî¢ 201 code only
    </div>
  </div>

  <p style="text-align: center;">
    <a href="cart.html">Go to Cart</a> | 
    <a href="orders.html">View Your Orders</a>
  </p>

  <script>
    const API_BASE = 'https://paradise-shop-1.onrender.com';
    const token = localStorage.getItem('jwtToken');

    if (!token) {
      alert('Please log in first.');
      window.location.href = 'index.html';
    }

    function authHeaders() {
      return {
        'Content-Type': 'application/json',
        'Authorization': 'Bearer ' + token
      };
    }

    async function loadProfile() {
      try {
        const res = await fetch(`${API_BASE}/api/profile`, {
          headers: authHeaders()
        });
        if (!res.ok) throw new Error('Not authenticated');
        const data = await res.json();

        const profileInfoDiv = document.getElementById('profileInfo');
        profileInfoDiv.innerHTML = `
          <strong>${data.username}</strong><br>
          Balance: $${data.balance.toFixed(2)}<br>
          Spent: $${data.totalSpent.toFixed(2)}<br>
          Total: $${(data.balance + data.totalSpent).toFixed(2)}<br>
          Joined: ${data.joinDate}<br>
          Orders: ${data.ordersCount}
        `;
      } catch (err) {
        alert('Session expired or invalid token. Please log in again.');
        window.location.href = 'index.html';
      }
    }

    async function addToCart(name, price) {
      try {
        const res = await fetch(`${API_BASE}/api/cart/add`, {
          method: 'POST',
          headers: authHeaders(),
          body: JSON.stringify({ name, price })
        });
        if (!res.ok) throw new Error('Failed to add to cart');
        alert(`${name} added to cart.`);
      } catch (err) {
        alert('Error adding to cart. Please try again.');
      }
    }

    function toggleDetails(button) {
      const desc = button.nextElementSibling.nextElementSibling;
      if (!desc) return;
      const isHidden = desc.style.display === 'none' || desc.style.display === '';
      desc.style.display = isHidden ? 'block' : 'none';
      button.textContent = isHidden ? 'Hide Details' : 'Details';
      desc.setAttribute('aria-hidden', !isHidden);
    }

    loadProfile();

    // Hamburger menu toggle
    const menuToggle = document.getElementById('menuToggle');
    const sideMenu = document.getElementById('sideMenu');

    menuToggle.addEventListener('click', () => {
      const active = sideMenu.classList.toggle('active');
      sideMenu.hidden = !active;
      menuToggle.setAttribute('aria-pressed', active);
    });
    menuToggle.addEventListener('keydown', (e) => {
      if (e.key === 'Enter' || e.key === ' ') {
        e.preventDefault();
        const active = sideMenu.classList.toggle('active');
        sideMenu.hidden = !active;
        menuToggle.setAttribute('aria-pressed', active);
      }
    });
    window.addEventListener('click', (e) => {
      if (!sideMenu.contains(e.target) && !menuToggle.contains(e.target)) {
        sideMenu.classList.remove('active');
        sideMenu.hidden = true;
        menuToggle.setAttribute('aria-pressed', false);
      }
    });

    // Profile dropdown toggle
    const profileIcon = document.getElementById('profileIcon');
    const profileDropdown = document.getElementById('profileDropdown');

    function toggleProfileDropdown() {
      const isActive = profileDropdown.classList.toggle('active');
      profileDropdown.hidden = !isActive;
      profileIcon.setAttribute('aria-expanded', isActive);
    }

    profileIcon.addEventListener('click', toggleProfileDropdown);
    profileIcon.addEventListener('keydown', (e) => {
      if (e.key === 'Enter' || e.key === ' ') {
        e.preventDefault();
        toggleProfileDropdown();
      }
    });

    window.addEventListener('click', (e) => {
      if (!profileIcon.contains(e.target) && !profileDropdown.contains(e.target)) {
        profileDropdown.classList.remove('active');
        profileDropdown.hidden = true;
        profileIcon.setAttribute('aria-expanded', false);
      }
    });
  </script>

</body>
</html>
